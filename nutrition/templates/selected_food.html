{% extends "base.html" %}

{% comment %}
  web_nutrition: a web based nutrition and diet analysis program.
  Copyright (C) 2008 Edgar Denny

  This program is free software: you can redistribute it and/or modify
  it under the terms of the GNU Affero General Public License as
  published by the Free Software Foundation, either version 3 of the
  License, or (at your option) any later version.

  This program is distributed in the hope that it will be useful,
  but WITHOUT ANY WARRANTY; without even the implied warranty of
  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
  GNU Affero General Public License for more details.

  You should have received a copy of the GNU Affero General Public License
  along with this program.  If not, see <http://www.gnu.org/licenses/>.
{% endcomment %}

{% block title %}Selected Food{% endblock %}</title>

{% block menu_food_search %}class="active"{% endblock %}

{% block content %}

  {% if name %}

  <h1>Selected Food : {{ name|escape }}</h1>

  <form action="/food_search/food_id/{{ food_id }}" method="GET">
    <div id="food-amount">
      {{ form.amount.label_tag }}:
      {{ form.amount}} {% if form.amount.errors %}<span class="errors">*</span>{% endif %}
    </div>
    <div id="food-measure">
      {{ form.measure.label_tag }}:
      {{ form.measure }}
    </div>
    <input type="submit" value="Calculate">
  </form>

  <div id="nav">
    <ul>
      <li><a title="macro" href="#">Macro Nutrients</a></li>
      <li><a title="vitamins" href="#">Vitamins</a></li>
      <li><a title="minerals" href="#">Minerals</a></li>
      <li><a title="aminos" href="#">Amino Acids</a></li>
      <li><a title="fats" href="#">Fats</a></li>
    </ul>
  </div>
  <div id="tabs">
    <div id="macro">
      <table>
        <tr>
          <th>Nutrient</th>
          <th colspan="2">Value</th>
          <th colspan="2">% DV</th>
        </tr>
        {% for n in nutrients.general %}
        <tr>
          <td>{{ n.nutr_desc }}</td>
          <td class="right">{{ n.nutr_value|stringformat:".2f" }}</td>
          <td class="left">{{ n.unit_of_measure }}</td>
          <td class="right">{{ n.percent_rdi|stringformat:".1f" }}</td>
          <td class="graph">
              <span id="bar" style="width: {{ n.width|stringformat:".1f" }}%;">
                {{ n.percent_rdi|stringformat:".1f" }}%
              </span>
          </td>
        </tr>
        {% endfor %}
      </table>
    </div>
    <div id="vitamins">
      <table>
        <tr>
          <th>Nutrient</th>
          <th colspan="2">Value</th>
          <th colspan="2">% DV</th>
        </tr>
        {% for n in nutrients.vitamins %}
        <tr>
          <td>{{ n.nutr_desc }}</td>
          <td class="right">{{ n.nutr_value|stringformat:".2f" }}</td>
          <td class="left">{{ n.unit_of_measure }}</td>
          <td class="right">{{ n.percent_rdi|stringformat:".1f" }}</td>
          <td class="graph">
              <span id="bar" style="width: {{ n.width|stringformat:".1f" }}%;">
                {{ n.percent_rdi|stringformat:".1f" }}%
              </span>
          </td>
        </tr>
        {% endfor %}
      </table>
    </div>
    <div id="minerals">
      <table>
        <tr>
          <th>Nutrient</th>
          <th colspan="2">Value</th>
          <th colspan="2">% DV</th>
        </tr>
        {% for n in nutrients.minerals %}
        <tr>
          <td>{{ n.nutr_desc }}</td>
          <td class="right">{{ n.nutr_value|stringformat:".2f" }}</td>
          <td class="left">{{ n.unit_of_measure }}</td>
          <td class="right">{{ n.percent_rdi|stringformat:".1f" }}</td>
          <td class="graph">
              <span id="bar" style="width: {{ n.width|stringformat:".1f" }}%;">
                {{ n.percent_rdi|stringformat:".1f" }}%
              </span>
          </td>
        </tr>
        {% endfor %}
      </table>
    </div>
    <div id="aminos">
      <table>
        <tr>
          <th>Nutrient</th>
          <th colspan="2">Value</th>
          <th colspan="2">% DV</th>
        </tr>
        {% for n in nutrients.amino_acids %}
        <tr>
          <td>{{ n.nutr_desc }}</td>
          <td class="right">{{ n.nutr_value|stringformat:".2f" }}</td>
          <td class="left">{{ n.unit_of_measure }}</td>
          <td class="right">{{ n.percent_rdi|stringformat:".1f" }}</td>
          <td class="graph">
              <span id="bar" style="width: {{ n.width|stringformat:".1f" }}%;">
                {{ n.percent_rdi|stringformat:".1f" }}%
              </span>
          </td>
        </tr>
        {% endfor %}
      </table>
    </div>
    <div id="fats">
      <table>
        <tr>
          <th>Nutrient</th>
          <th colspan="2">Value</th>
          <th colspan="2">% DV</th>
        </tr>
        {% for n in nutrients.fats %}
        <tr>
          <td>{{ n.nutr_desc }}</td>
          <td class="right">{{ n.nutr_value|stringformat:".2f" }}</td>
          <td class="left">{{ n.unit_of_measure }}</td>
          <td class="right">{{ n.percent_rdi|stringformat:".1f" }}</td>
          <td class="graph">
              <span id="bar" style="width: {{ n.width|stringformat:".1f" }}%;">
                {{ n.percent_rdi|stringformat:".1f" }}%
              </span>
          </td>
        </tr>
        {% endfor %}
      </table>
    </div>
  </div>
  {% endif %}
{% endblock %}
